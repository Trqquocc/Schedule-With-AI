/* ===================================
   AI MODAL DISPLAY FIX - CORRECT SELECTOR VERSION
   Problem: CSS selectors don't match actual DOM structure
   =================================== */

/* ✅ Modal container - When shown */
#aiSuggestionModal {
  display: none !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 10000 !important;
  align-items: center !important;
  justify-content: center !important;
  padding: 20px !important;
  background: rgba(0, 0, 0, 0.5) !important;
  backdrop-filter: blur(2px) !important;
}

/* Active states - WITHOUT .modal-content selector */
#aiSuggestionModal.active,
#aiSuggestionModal.show,
#aiSuggestionModal:not(.hidden) {
  display: flex !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
}

/* Hidden state */
#aiSuggestionModal.hidden {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* ✅ CRITICAL FIX: Target ALL .modal-content inside #aiSuggestionModal
   regardless of parent state classes */
#aiSuggestionModal .modal-content {
  display: flex !important;
  flex-direction: column !important;
  width: 90vw !important;
  max-width: 800px !important;
  min-width: 600px !important;
  min-height: 400px !important;
  max-height: 90vh !important;
  background: white !important;
  border-radius: 12px !important;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;
  overflow: hidden !important;
  position: relative !important;
  z-index: 10001 !important;
  animation: modalSlideIn 0.3s ease-out !important;
}

/* ✅ NUCLEAR OPTION: Force dimensions with !important on every property */
#aiSuggestionModal .modal-content {
  /* Force width */
  width: 800px !important;
  max-width: 90vw !important;
  min-width: 600px !important;

  /* Force height */
  height: auto !important;
  min-height: 400px !important;
  max-height: 90vh !important;

  /* Force display */
  display: flex !important;
  flex-direction: column !important;
  flex-shrink: 0 !important;

  /* Force box model */
  box-sizing: border-box !important;
  padding: 0 !important;
  margin: 0 auto !important;

  /* Force visibility */
  opacity: 1 !important;
  visibility: visible !important;

  /* Background and shadow */
  background: white !important;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;
  border-radius: 12px !important;
}

/* ✅ Force header visible with fixed height */
#aiSuggestionModal .ai-modal-header {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  padding: 20px 24px !important;
  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%) !important;
  color: white !important;
  flex-shrink: 0 !important;
  min-height: 80px !important;
  height: 80px !important;
  width: 100% !important;
  box-sizing: border-box !important;
}

/* ✅ Force body visible with min-height */
#aiSuggestionModal .ai-modal-body {
  display: block !important;
  padding: 24px !important;
  flex: 1 !important;
  overflow-y: auto !important;
  min-height: 300px !important;
  width: 100% !important;
  box-sizing: border-box !important;
  background: white !important;
}

/* ✅ Force footer visible with fixed height */
#aiSuggestionModal .ai-modal-footer {
  display: flex !important;
  justify-content: space-between !important;
  padding: 20px 24px !important;
  background: #f9fafb !important;
  border-top: 2px solid #e5e7eb !important;
  flex-shrink: 0 !important;
  min-height: 80px !important;
  height: 80px !important;
  width: 100% !important;
  box-sizing: border-box !important;
}

/* ✅ Force form elements visible */
#aiSuggestionModal #aiSuggestionForm {
  display: block !important;
  width: 100% !important;
}

#aiSuggestionModal .form-section {
  display: block !important;
  margin-bottom: 24px !important;
  width: 100% !important;
}

/* ✅ Animation */
@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* ✅ EMERGENCY DEBUG: Add visible border for troubleshooting */
#aiSuggestionModal.debug .modal-content {
  border: 5px solid red !important;
  background: rgba(255, 0, 0, 0.1) !important;
}

/* ✅ Responsive design */
@media (max-width: 1024px) {
  #aiSuggestionModal .modal-content {
    width: 95vw !important;
    max-width: 750px !important;
    min-width: 500px !important;
  }
}

@media (max-width: 768px) {
  #aiSuggestionModal .modal-content {
    width: 98vw !important;
    max-width: 700px !important;
    min-width: auto !important;
    max-height: 95vh !important;
  }
}

@media (max-width: 480px) {
  #aiSuggestionModal .modal-content {
    width: 100vw !important;
    max-width: 100vw !important;
    min-width: auto !important;
    max-height: 100vh !important;
    border-radius: 0 !important;
  }
}

/* ✅ ABSOLUTE LAST RESORT: Inline style override helper */
#aiSuggestionModal .modal-content[style] {
  width: 800px !important;
  height: auto !important;
  min-width: 600px !important;
  min-height: 400px !important;
  display: flex !important;
}
